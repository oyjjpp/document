# Golang常见问题

## 编译原理

[Golang编译原理](./compile.md)

## 数据结构

[Golang数据结构](./struct.md)

## 并发模型

[Golang并发模型](./concurrent.md)

## 内存管理

[Golang内存管理](./memory.md)

## Go中对nil的Slice和空的Slice的处理是一致的吗？

nil slice和empty slice是不一致的

## context

上下文是Go语言中用来设置截止日期、同步信号，传递请求相关值的接口类型；上下文与Goroutine有比较密切的关系；

```golang
type Context interface {
 Deadline() (deadline time.Time, ok bool)
 Done() <-chan struct{}
 Err() error
 Value(key interface{}) interface{}
}
```

主要作用是在多个Goroutine组成的树中同步取消信号以减少对资源的消耗和占用；还有传值的功能，但是这个功能我们还是很少用到。

## append时的过程

针对切片类型持续进行append可能会导致切片进行扩容

校验是否赋值原有变量

### 如果不赋值原有变量  

1、首先获取当前切片的数组指针、大小、容量  
2、如果追加的元素后，长度大于容量，会触发切片的扩容  
3、最后将追加的元素添加到指定的数组中

### 如果赋值原有变量  

Go语言编译器已经对这种常见的情况做出了优化  
其他步骤与不赋值原有变量逻辑一致  

## append引发的扩容

1、如果期望容量大于当前容量的两倍就会使用期望容量；  
2、如果当前切片的长度小于 1024 就会将容量翻倍；  
3、如果当前切片的长度大于 1024 就会每次增加 25% 的容量，直到新容量大于期望容量；  

以上仅是针对容量大小的简单计算，还会设计内存对齐

需要注意的是在遇到大切片扩容或者复制时可能会发生大规模的内存拷贝，一定要减少类似操作避免影响程序的性能。

## 一个二维数组，行遍历快还是列遍历快，为什么？

1、CPU高速缓存：在计算机系统中，CPU高速缓存是用于减少处理器访问内存所需平均时间的部件。在金字塔式存储体系中它位于自顶向下的第二层，仅次于CPU寄存器。其容量远小于内存，但速度却可以接近处理器的频率。当处理器发出内存访问请求时，会先查看缓存内是否有请求数据。如果存在（命中），则不经访问内存直接返回该数据；如果不存在（失效），则要先把内存中的相应数据载入缓存，再将其返回处理器。缓存之所以有效，主要是因为程序运行时对内存的访问呈现局部性（Locality）特征。这种局部性既包括空间局部性（Spatial Locality），也包括时间局部性（Temporal Locality）。有效利用这种局部性，缓存可以达到极高的命中率。  

2、缓存从内存中抓取一般都是整个数据块，所以它的物理内存是连续的，几乎都是同行不同列的，而如果内循环以列的方式进行遍历的话，将会使整个缓存块无法被利用，而不得不从内存中读取数据，而从内存读取速度是远远小于从缓存中读取数据的。随着数组元素越来越多，按列读取速度也会越来越慢。

## 并发读写map会发生什么？怎么避免?

fatal error: concurrent map read and map write  
会发生并发读写问题

1、在1.9之前可以定义一个结构体加上一把读写锁来解决并发安全问题；
2、1.9之后官方在sync包定义了Map结构体，如果遇到并发问题，可以使用sync.Map解决。  

## go的gc原理了解吗？

## go语言的时候垃圾回收，写代码的时候如何减少小对象分配

## gin框架的路由是怎么处理的？

## gmp具体的调度策略

## go实现不重启热部署

## go性能分析工具

## goroutine创建数量有限制吗？

## go并发机制

## go内存操作也要处理IO，是如何处理的?

## go map并发安全问题，如何解决

## 切片和数组、map、gc、gpm调度模型

## sync pool的实现原理

## map里面解决hash冲突怎么做的，冲突了元素放在头还是尾

## 同一个协程里面，对无缓冲channel同时发送和接收数据有什么问题

## channel和锁对比一下

## channel的应用场景

## slice和array区别

## 向为nil的channel发送数据会怎么样

## map取一个key，然后修改这个值，原map数据的值会不会变化

## Hash实现、冲突解决、应用

## protobuf为什么快

## go waitgroup的坑

## go struct能不能比较

## select可以用于什么

## context包的用途

## client如何实现长连接

## 主协程如何等其余协程完再操作

## slice，len，cap，共享，扩容

## map如何顺序读取
  
## go的垃圾回收机制

## gmp模型

## go的sync.Map了解吗

## channel主要做什么事情

## 怎么检查go问题

## 切片的底层实现

## go和node的差别

## context包内部如何实现的？

## go怎么实现封装继承多态

## 为什么go的变量申请类型是为了什么？

## go slice和map的区别，slice和数组的区别

## go结构体和结构体指针的区别

## go深拷贝，什么时候需要深拷贝

## 如何拿到多个goroutine的返回值，如何区别他们

## go如何避免panic

## go的profile工具？

## go的切片扩容机制

## 用火焰图的优势？

## go里面比较成熟的日志框架了解过没有

## go协程线程进程区别

## 了解的gc算法有哪些？

## go的init函数是什么时候执行的？

## 多个init函数执行顺序能保证吗？

## for range坑输出

## go实现一个并发限制爬虫

## 如何通过goclient写代码获取

## 写个channel相关的题，并发模型，爬虫url，控制并发量

## 参数检查中间件核心功能有哪些？

## 说说火焰图？如何分析的？

## 对go的中间件和工作机制有了解吗？

## go使用中遇到的问题

## cgo了解过引入的风险点吗？

## 为什么不要频繁创建和停止goroutine

## channel底层是用什么实现的？

## go里面为什么需要多协程？

## 知道processor大小是多少吗？

## goroutine为什么会存在，为什么不使用线程？

## string和byte数组有什么区别？

## channel有缓冲和无缓冲在使用上有什么区别？

## 关闭channel有什么作用？

## 用go实现一个协程池，大概用什么实现

## go channel实现排序

## 读过什么go源码没有

## go语言gc了解吗？

## go什么场景使用接口

## 结构体传递场景

## 协程线程区别

## go开发多长时间了？

## 数组和切片的关系和区别

## 内存申请上有什么区别

## 函数传递有什么区别

## 切片底层的架构

## 如何把数组转化成一个切片

## 服务能开多少个m由什么决定

## 开多少个p由什么决定

## m和p是什么样的关系

## 同时启了一万个g，如何调度的？

## go里面channel是什么样的概念

## channel和共享内存有什么优劣势？

## channel的底层有了解过吗

## 数组和切片的区别

## 线程和协程的区别

## 一个进程能创建多少线程受哪些因素的限制

## go里面interface是什么概念

## 相比于javac++interface有什么区别吗？

## goroutine在项目里面主要承担了什么责任

## channel在项目里面是什么作用？

## golang用到哪些框架

你觉得java和golang有什么优势劣势？

## golang wait.group用过吗？

## go里面map是并发安全的吗？不是并发安全该如何使用？

## 读写锁说下

## defer用的多吗？有哪些应用

## 异常捕获是如何做的？

## 怎么理解“不要用共享内存来通信，而是用通信来共享内存”

## 用go协程的时候也是要走IO的，go是如何处理的？

## 为什么不要大量使用goroutine

## go里面goroutine创建数量有限制吗？

## 线程和协程有什么区别

## golang支持哪些并发机制

## go利用channel通信的方式

## 有缓冲和无缓冲channel的区别

## channel实现原理

## 被close的channel会有什么问题

## 分布式锁知道哪些？用channel如何实现？

## 集群用channel如何实现分布式锁

## 并行goroutine如何实现

## go用共享内存的方式实现并发如何保证安全？

## go的锁是可重入的吗？

## 获取不到锁会一直等待吗？

## 那如何实现一个timeout的锁？

## go切片是如何实现的

## go语言如何实现服务不重启热部署

## 如何实现一个线程安全的map

## 创建一个数组底层扩容

## make一个slice参数怎么写？

## 为什么gpm模型会更快？

## 线程协程区别

## 火焰图怎么来寻找瓶颈的？

## map会遇到一些并发安全的问题，为什么就并发不安全了？

## 为什么给变量一个基础类型没有并发安全问题？
